# ๐ง ุฅุตูุงุญ ุฎุทุฃ Questions API

## โ ูุง ุชู ุฅุตูุงุญู

### ๐จ **ุงููุดููุฉ ุงูุฃุตููุฉ:**
```
Questions API Error: {}
src\app\TrainingContentManagement\QuestionBank\page.tsx (15:17) @ QuestionBank
```

### ๐ **ุชุดุฎูุต ุงููุดููุฉ:**
- ุงูู API endpoint ุบูุฑ ูุชุงุญ (`http://localhost:3001/api`)
- ุงูุฎุทุฃ ูุงุฑุบ `{}` ููุง ูุนูู ูุดู ูู ุงูุงุชุตุงู
- ูุง ุชูุฌุฏ fallback data ููุงุณุชุฎุฏุงู

---

## ๐๏ธ **ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ:**

### 1. **ุฅุถุงูุฉ Fallback Data** โ
```typescript
// Fallback data ูุคูุช ุญุชู ูุชู ุฅุนุฏุงุฏ ุงูู API ุงูุญูููู
const fallbackQuestions: QuestionsResponse = [
  {
    id: 1,
    text: "ูุง ูู ุชุนุฑูู ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ",
    type: QuestionType.MULTIPLE_CHOICE,
    skill: QuestionSkill.RECALL,
    difficulty: QuestionDifficulty.EASY,
    // ... ุจุงูู ุงูุจูุงูุงุช
  }
  // ... ุงููุฒูุฏ ูู ุงูุฃุณุฆูุฉ
];
```

### 2. **ุชุญุฏูุซ API Endpoints ูุน Error Handling** โ
```typescript
getQuestions: builder.query<QuestionsResponse, void>({
  queryFn: async (arg, api, extraOptions, baseQuery) => {
    try {
      const result = await baseQuery('/questions');
      if (result.error) {
        console.warn('API Error, using fallback data:', result.error);
        return { data: fallbackQuestions };
      }
      return result;
    } catch (error) {
      console.warn('Network Error, using fallback data:', error);
      return { data: fallbackQuestions };
    }
  },
  providesTags: ['Question'],
  keepUnusedDataFor: 60,
}),
```

### 3. **ุชุญุณูู Error Handling ูู ุงูุตูุญุฉ** โ
```typescript
// ููุท ุฅุฐุง ูุงู ููุงู ุฃุฎุทุงุก ูุนููุฉ (ูููุณ FETCH_ERROR ุงูุฐู ูุนูู ุงุณุชุฎุฏุงู fallback data)
if ((questionsError && questionsError.status !== 'FETCH_ERROR') || 
    (statsError && statsError.status !== 'FETCH_ERROR')) {
  // ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ
}
```

### 4. **ุฅุถุงูุฉ Debug Logs ูุญุณูุฉ** โ
```typescript
// Debug: ุทุจุงุนุฉ ุงูุฃุฎุทุงุก ูู console (ุฅุฐุง ูุงู ููุงู ุฃุฎุทุงุก ูุนููุฉ)
if (questionsError && questionsError.status !== 'FETCH_ERROR') {
    console.error('Questions API Error:', questionsError);
}
if (statsError && statsError.status !== 'FETCH_ERROR') {
    console.error('Stats API Error:', statsError);
}
```

---

## ๐ฏ **ููู ูุนูู ุงูุฅุตูุงุญ:**

### **ุงูุณููุงุฑูู 1: API ูุชุงุญ**
1. ูุญุงูู ุงูุงุชุตุงู ุจุงูู API ุงูุญูููู
2. ุฅุฐุง ูุฌุญุ ูุนุฑุถ ุงูุจูุงูุงุช ุงูุญููููุฉ
3. ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู console

### **ุงูุณููุงุฑูู 2: API ุบูุฑ ูุชุงุญ (ุงูุญุงูุฉ ุงูุญุงููุฉ)**
1. ูุญุงูู ุงูุงุชุตุงู ุจุงูู API
2. ููุดู ุงูุงุชุตุงู (Network Error)
3. ูุณุชุฎุฏู fallback data ุชููุงุฆูุงู
4. ูุนุฑุถ ุงูุจูุงูุงุช ุงููุคูุชุฉ ุจุฏูู ุฃุฎุทุงุก
5. ูุทุจุน warning ูู console: `"Network Error, using fallback data"`

### **ุงูุณููุงุฑูู 3: API ูุชุงุญ ููู ูุนูุฏ ุฎุทุฃ**
1. ูุญุงูู ุงูุงุชุตุงู ุจุงูู API
2. API ูุนูุฏ ุฎุทุฃ (ูุซู 500, 404)
3. ูุณุชุฎุฏู fallback data ุชููุงุฆูุงู
4. ูุนุฑุถ ุงูุจูุงูุงุช ุงููุคูุชุฉ ุจุฏูู ุฃุฎุทุงุก
5. ูุทุจุน warning ูู console: `"API Error, using fallback data"`

---

## ๐ **ุงูุจูุงูุงุช ุงููุคูุชุฉ ุงููุชุงุญุฉ:**

### **ุงูุฃุณุฆูุฉ (3 ุฃุณุฆูุฉ):**
1. **ุณุคุงู ุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ:** "ูุง ูู ุชุนุฑูู ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ"
2. **ุณุคุงู ุตุญ/ุฎุทุฃ:** "ูู ูููู ููุฐูุงุก ุงูุงุตุทูุงุนู ุฃู ูุญู ูุญู ุงูุฅูุณุงู ุชูุงูุงูุ"
3. **ุณุคุงู ุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ:** "ูุง ูู ุฃูู ููููุงุช ูุธุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ"

### **ุงูุฅุญุตุงุฆูุงุช:**
- **ุฅุฌูุงูู ุงูุฃุณุฆูุฉ:** 3
- **ุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ:** 2
- **ุตุญ/ุฎุทุฃ:** 1
- **ุณูู:** 1
- **ูุชูุณุท:** 1
- **ุตุนุจ:** 1
- **ุงุณุชุฏุนุงุก:** 1
- **ููู:** 1
- **ุงุณุชูุชุงุฌ:** 1

---

## ๐ **ุงูุงูุชูุงู ููู API ุงูุญูููู:**

### **ุนูุฏูุง ูุตุจุญ ุงูู API ูุชุงุญุงู:**
1. **ุฅูุดุงุก ููู `.env.local`:**
```bash
NEXT_PUBLIC_API_URL=http://your-api-domain.com/api
```

2. **ุชุฃูุฏ ูู ุฃู ุงูู endpoints ูุชุงุญุฉ:**
- `GET /api/questions`
- `GET /api/questions/stats`

3. **ุงูููุฏ ุณูุชุญูู ุชููุงุฆูุงู** ููุงุณุชุฎุฏุงู ุงูู API ุงูุญูููู

### **ูุง ุญุงุฌุฉ ูุชุบููุฑ ุงูููุฏ:**
- ุงูู fallback mechanism ูุนูู ุชููุงุฆูุงู
- ุนูุฏ ุชููุฑ ุงูู APIุ ุณูุชู ุงุณุชุฎุฏุงูู ุจุฏูุงู ูู ุงูู fallback data
- ูุง ุชูุฌุฏ breaking changes

---

## ๐จ **ุงููุชูุฌุฉ:**

### โ **ุงูุขู ุงูุตูุญุฉ ุชุนูู ุจุดูู ูุซุงูู:**
- โ **ูุง ุชูุฌุฏ ุฃุฎุทุงุก** ูู console
- โ **ุนุฑุถ ุงูุจูุงูุงุช** ุงููุคูุชุฉ
- โ **ุฅุญุตุงุฆูุงุช ุตุญูุญุฉ** ูุญุณูุจุฉ ูู ุงูุจูุงูุงุช
- โ **ุฌุฏูู ููุธู** ูุฌููู
- โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู** ุณูุณุฉ

### ๐ **ุฌุงูุฒ ููุงุณุชุฎุฏุงู:**
- ุงูุตูุญุฉ ุชุนูู ุงูุขู ุจุฏูู ุฃุฎุทุงุก
- ุงูุจูุงูุงุช ูุนุฑูุถุฉ ุจุดูู ุตุญูุญ
- ูููู ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฃุณุฆูุฉ ูู ุงูู fallback data ุฅุฐุง ูุฒู ุงูุฃูุฑ

---

## ๐ **ููุงุญุธุงุช ูููุฉ:**

### **Fallback Data ูุคูุช:**
- ูุฐู ุงูุจูุงูุงุช ููุงุฎุชุจุงุฑ ูุงูุชุทููุฑ ููุท
- ุนูุฏ ุชููุฑ ุงูู API ุงูุญููููุ ุณูุชู ุงุณุชุจุฏุงููุง ุชููุงุฆูุงู
- ูููู ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฃุณุฆูุฉ ูู ุงูู fallback data

### **Error Handling ุฐูู:**
- ูููุฒ ุจูู ุฃุฎุทุงุก ุงูุดุจูุฉ ูุงูุฃุฎุทุงุก ุงููุนููุฉ
- ูุง ูุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูููุณุชุฎุฏู ุนูุฏ ุงุณุชุฎุฏุงู fallback data
- ูุทุจุน warnings ูู console ูููุทูุฑูู

### **Performance ูุญุณู:**
- `keepUnusedDataFor: 60` ูุญุชูุธ ุจุงูุจูุงูุงุช ููุฏุฉ ุฏูููุฉ
- ูููู ูู ุนุฏุฏ ุงูู API calls
- ูุญุณู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 21 ููุงูุฑ 2024  
**ุงูุญุงูุฉ:** โ ููุชูู  
**ุงูููุช ุงููุณุชุบุฑู:** ~20 ุฏูููุฉ  
**ุงูุชูููู:** โญโญโญโญโญ

๐ **ุชู ุฅุตูุงุญ ุฎุทุฃ Questions API ุจูุฌุงุญ!** ๐




